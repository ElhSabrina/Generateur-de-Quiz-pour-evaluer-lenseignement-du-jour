//- views/teacher/dashboard.pug
extends ../layout

block content
  h1 Teacher dashboard

  .grid-two
    //- LEFT: Subjects
    .card
      h3 Your subjects
      form(method="post" action="/teacher/subjects")
        input(type="text" name="name" placeholder="New subject name" required)
        button.btn-primary(type="submit") Add subject

      if subjects && subjects.length
        ul
          each s in subjects
            li= s.name
      else
        p.small-text No subjects yet.

    //- RIGHT: Quizzes
    .card
      h3 Your quizzes
      a.btn-primary(href="/teacher/quizzes/new") Create a new quiz

      if quizzes && quizzes.length
        table.table
          thead
            tr
              th Title
              th Subject
              th Code
              th Status
              th Actions
          tbody
            each q in quizzes
              tr
                td= q.title
                td= q.subject_name
                td.code-badge= q.code
                td= q.status
                td
                  if q.status === 'draft'
                    a.btn-small(href=`/teacher/quizzes/${q.id}/edit`) Edit questions
                    form.inline(method="post" action=`/teacher/quizzes/${q.id}/open`)
                      button.btn-small(type="submit") Open
                  else if q.status === 'open'
                    a.btn-small(href=`/teacher/quizzes/${q.id}/ready`) Live view
                  else if q.status === 'closed'
                    a.btn-small(href=`/teacher/quizzes/${q.id}/analysis`) View analysis

                  form.inline(method="post" action=`/teacher/quizzes/${q.id}/delete`)
                    button.btn-small.btn-danger(type="submit") Delete
      else
        p.small-text No quizzes created yet.
